@if(loading){
<div>
    <h1>
        page is loading please wait......!
    </h1>
</div>
}

@else{
<div class="container mt-4">
    <table class="table table-striped table-hover table-bordered text-center align-middle">
      <thead class="table-primary">
        <tr>
          <th>emp id</th>
          <th>emp name</th>
          <th>emp Username</th>
          <th>email</th>
          <th>role</th>
          <th>Delete Action</th>
          <th>View Action</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        
        @for(emp of usersData; track $index){
        <tr>
          <td>{{ emp.id }}</td>
          <td>{{ emp.name }}</td>
          <td>{{emp.username}}</td>
          <td>{{ emp.email }}</td>
            <td>{{emp.role}}</td>

          <td>
            <button class="btn btn-danger btn-sm" (click)="delete_users(emp.id)" type="button">
              <!-- <fa-icon [icon]="faDeleteLeft"></fa-icon> --> 
               delete
            </button>  
          </td>
          <td>
            <button
              class="btn btn-info btn-sm"
              type="button"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
              (click)="onViewEmployee(emp.id)"
            >
            view
              <!-- <fa-icon [icon]="faView"></fa-icon> -->
            </button>
          </td>
          <td>
            <button
              class="btn btn-info btn-sm"
              type="button"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
              (click)="clickOnEdit(emp)"
            >
            Edit
              <!-- <fa-icon [icon]="faView"></fa-icon> -->
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <br>
  <button (click)="onClickFlag('add')">Add Users</button>
  <br>
@if(flag=='add'){
  <form #empForm="ngForm" (ngSubmit)="onAddEmployee(empForm)" class="p-4 border rounded shadow-sm bg-light">

    <h4 class="mb-4 text-center text-primary">Add New User</h4>
  
    <div class="mb-3">
      <label for="name" class="form-label fw-semibold">Name</label>
      <input
        type="text"
        id="name"
        [(ngModel)]="newUser.name"
        name="name"
        class="form-control"
        placeholder="Enter full name"
        required
      />
    </div>
  
    <div class="mb-3">
      <label for="username" class="form-label fw-semibold">Username</label>
      <input
        type="text"
        id="username"
        [(ngModel)]="newUser.username"
        name="username"
        class="form-control"
        placeholder="Enter username"
        required
      />
    </div>
  
    <div class="mb-3">
      <label for="email" class="form-label fw-semibold">Email</label>
      <input
        type="email"
        id="email"
        [(ngModel)]="newUser.email"
        name="email"
        class="form-control"
        placeholder="Enter email address"
        required
      />
    </div>
  
    <div class="mb-3">
      <label for="role" class="form-label fw-semibold">Role</label>
      <select
        id="role"
        [(ngModel)]="newUser.role"
        name="role"
        class="form-select"
        required
      >
        <option value="" disabled selected>Select role</option>
        <option value="Admin">Admin</option>
        <option value="User">User</option>
      </select>
    </div>
  
    <div class="d-grid">
      <button type="submit" class="btn btn-primary btn-lg">
        <i class="bi bi-person-plus"></i> Add User
      </button>
    </div>
  </form>
}@else if(flag=='view'){



<h1>View Details</h1>
    <div class="container mt-4">
        <table class="table table-striped table-hover table-bordered text-center align-middle">
          <thead class="table-primary">
            <tr>
              <th>emp id</th>
              <th>emp name</th>
              <th>emp username</th>
              <th>email</th>
              <th>role</th>
            </tr>
          </thead>
          <tbody>
            @for(emp of employeeDetails; track $index){
            <tr>
              <td>{{ emp.id }}</td>
              <td>{{ emp.name }}</td>
              <td>{{emp.username}}</td>
              <td>{{ emp.email }}</td>

                <td>{{emp.role}}</td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    }@else if(flag ==='edit'){
        <form #empForm="ngForm" (ngSubmit)="onEditEmployee(empForm)" class="p-4 border rounded shadow-sm bg-light">

            <h4 class="mb-4 text-center text-primary">Edit  User</h4>
          
            <div class="mb-3">
              <label for="name" class="form-label fw-semibold">Name</label>
              <input
                type="text"
                id="name"
                [(ngModel)]="newUser.name"
                name="name"
                class="form-control"
                placeholder="Enter full name"
                required
              />
            </div>
          
            <div class="mb-3">
              <label for="username" class="form-label fw-semibold">Username</label>
              <input
                type="text"
                id="username"
                [(ngModel)]="newUser.username"
                name="username"
                class="form-control"
                placeholder="Enter username"
                required
              />
            </div>
          
            <div class="mb-3">
              <label for="email" class="form-label fw-semibold">Email</label>
              <input
                type="email"
                id="email"
                [(ngModel)]="newUser.email"
                name="email"
                class="form-control"
                placeholder="Enter email address"
                required
              />
            </div>
          
            <div class="mb-3">
              <label for="role" class="form-label fw-semibold">Role</label>
              <select
                id="role"
                [(ngModel)]="newUser.role"
                name="role"
                class="form-select"
                required
              >
                <option value="" disabled selected>Select role</option>
                <option value="Admin">Admin</option>
                <option value="User">User</option>
              </select>
            </div>
          
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="bi bi-person-plus"></i> Edit User
              </button>
            </div>
          </form>
    }
}